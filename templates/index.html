<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyShare Dashboard - Ultimate Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <div class="app-container">

        <aside class="sidebar">
            <div class="logo">
                StudyShare
            </div>
            <nav class="nav-links">
                <a href="/" class="nav-item active">
                    <span class="icon">🏠</span> Dashboard
                </a>
                <a href="/upload" class="nav-item">
                    <span class="icon">📤</span> Upload Files
                </a>
                <a href="/profile" class="nav-item">
                    <span class="icon">👤</span> Profile
                </a>
                <a href="/logout" class="nav-item nav-logout">
                    <span class="icon">➡️</span> Logout
                </a>
            </nav>
        </aside>

        <main class="content-area">

            <header class="top-header">
                <div class="header-greeting">
                    <h1 class="dashboard-title">Welcome Back, {{ username|default('User') }}!</h1>
                </div>
                
                <div class="user-actions">
                    {% set badge_class = 'badge-new' if user_badge == 'New Member' else 'badge-uploader' if user_badge == 'Uploader' else 'badge-regular' %}
                    
                    <span class="badge {{ badge_class }}">{{ user_badge|default('New Member') }}</span>
                    <button onclick="window.location.href='/upload'" class="btn-primary btn-upload">Upload</button>
                    <button onclick="window.location.href='/logout'" class="btn-logout">Logout</button>
                </div>
            </header>

            <div class="alert-card alert-success">
                Logged in successfully! Access your study materials below.
            </div>

            <div class="card filter-card">
                <h3 class="card-title">Filter & Search Materials</h3>
                <form action="/" method="GET" class="filter-controls">
                    
                    <select name="subject" class="filter-select">
                        <option value="">All Subjects</option>
                        </select>
                    
                    <select name="type" class="filter-select">
                        <option value="">All Types</option>
                        </select>

                    <input type="text" name="search" class="filter-input" placeholder="Filename or description">
                    
                    <button type="submit" class="btn-primary">Apply Filters</button>
                    <button type="reset" onclick="window.location.href='/'" class="btn-secondary">Clear</button>
                </form>
            </div>

            <div class="card results-card">
                <h3 class="card-title">Available Materials (12 Found)</h3>

                {% if materials_list %}
                    {% else %}
                    <div class="empty-state">
                        <p>No study materials found matching your filters.</p> 
                        <a href="/upload" class="link-action">Upload one now!</a>
                    </div>
                {% endif %}
            </div>

            <div class="card comments-card">
                <h3 class="card-title">Discussion and Feedback</h3>

                <form action="/comment" method="POST" class="comment-form">
                    <textarea name="comment_text" placeholder="Share your thoughts or ask a question..." required></textarea>
                    <button type="submit" class="btn-primary">Post Comment</button>
                </form>

                <div class="comment-list">
                    <div class="comment-item">
                        <p class="comment-meta"><strong>Sarah Jane</strong> commented 5 minutes ago:</p>
                        <p class="comment-text">The new dashboard design is fantastic! Very easy to navigate.</p>
                        <button class="btn-reply">Reply</button>
                        
                        <div class="reply-item">
                            <p class="comment-meta"><strong>Admin</strong> replied just now:</p>
                            <p class="comment-text">Thank you! We're glad you like the new interface.</p>
                        </div>
                    </div>

                    </div>
            </div>
            
        </main>
    </div>
</body>
</html>
